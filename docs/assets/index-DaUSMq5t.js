(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}})();function y(t){return new Promise((n,o)=>{const l=new FileReader;l.onload=()=>{try{n(JSON.parse(l.result))}catch{o(new Error("El archivo JSON no es vÃ¡lido."))}},l.onerror=()=>o(new Error("No se pudo leer el archivo.")),l.readAsText(t)})}function B(t){return new Promise((n,o)=>{const l=new FileReader;l.onload=()=>n(l.result),l.onerror=()=>o(new Error("No se pudo leer el archivo.")),l.readAsText(t)})}function F(t,n,o){const l=new Blob([n],{type:o}),e=document.createElement("a");e.href=URL.createObjectURL(l),e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}const m=document.getElementById("outXML"),p=document.getElementById("outXSLT"),h=document.getElementById("codeXML"),E=document.getElementById("codeXSLT"),T=document.querySelectorAll("input"),L=document.getElementById("xml"),b=document.getElementById("xsltBtn"),X=document.getElementById("convert"),O=document.querySelectorAll("details"),I=new XMLSerializer;function N(t,{namespace:n,qualifiedName:o,doctype:l}){const e=document.implementation.createDocument(n,o,l),r=(c,d)=>{for(const i in d)if(Object.hasOwn(d,i)){const a=d[i];if(typeof a=="object"&&a!==null){const u=e.createElement(i);r(u,a),c.appendChild(u)}else{const u=e.createElement(i);u.appendChild(e.createTextNode(String(a))),c.appendChild(u)}}};return r(e.documentElement,t),e}function f(t){return I.serializeToString(t)}const M=new DOMParser,x=new XSLTProcessor;function w(t,n){const o=M.parseFromString(n,"application/xml");return x.importStylesheet(o),x.transformToFragment(t,document)}const P=`<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet>`;function A(t){return w(t,P)}const s={xml:null,result:null};T.forEach(t=>t.addEventListener("change",()=>{s.xml=null,s.result=null,h.style.opacity=0,E.style.opacity=0,m.style.display="none",p.style.display="none";const{present:n}=v();X.disabled=!n,S(!0)}));document.getElementById("convert").addEventListener("click",C);async function C(){const{present:t,files:n}=v();if(!t){alert("Debes seleccionar todos los archivos.");return}try{const{claseFile:o,objetoFile:l,xsltFile:e}=n,r=await y(o),c=await y(l),d=await B(e),i={...r,...c};s.xml=N(i,{qualifiedName:"boardingpass"}),s.xml=A(s.xml),s.result=w(s.xml,d),m.textContent=f(s.xml),p.textContent=f(s.result),m.style.display="block",p.style.display="block",h.style.opacity=1,E.style.opacity=1,S(!1),O.forEach(a=>a.setAttribute("open",!0)),L.addEventListener("click",()=>g("boardingpass.xml",s.xml)),b.addEventListener("click",()=>g("boardingpass.xml",s.result))}catch(o){alert("Error: "+o.message)}}function g(t,n){F(t,f(n),"application/xml")}function S(t){L.disabled=t,b.disabled=t}const v=()=>{const t=document.getElementById("clase").files[0],n=document.getElementById("objeto").files[0],o=document.getElementById("xslt").files[0];return{present:t&&n&&o,files:{claseFile:t,objetoFile:n,xsltFile:o}}};
